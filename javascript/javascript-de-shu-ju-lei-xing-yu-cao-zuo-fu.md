---
title: JS高程-JavaScript的数据类型与操作符
date: '2020-06-12T17:40:59.000Z'
category:
  - 前端
tags:
  - JavaScript
  - 《JavaScript高级程序设计》
---

# JavaScript 的数据类型与操作符

面试官：说一说`javascript`中有哪些数据类型?

`JavaScript` 中共有七种内置数据类型，包括**基本类型**和**对象类型**。

### 基本类型

基本类型分为以下七种：

* 布尔值（Boolean），有2个值分别是：`true` 和 `false`.
* null ， 一个表明 null 值的特殊关键字。 JavaScript 是大小写敏感的，因此 `null` 与 `Null`、`NULL`或变体完全不同。
* undefined ，和 null 一样是一个特殊的关键字，undefined 表示变量未定义时的属性。
* 数字（Number），整数或浮点数，例如： `42` 或者 `3.14159`。
* 任意精度的整数 \(BigInt\) ，可以安全地存储和操作大整数，甚至可以超过数字的安全整数限制。
* 字符串（String），字符串是一串表示文本值的字符序列，例如："Howdy" 。
* 代表（Symbol） \( 在 ECMAScript 6 中新添加的类型\).。一种实例是唯一且不可改变的数据类型。

引用类型为一种

* 对象（Object）

**注意**：

1. `string` 、`number` 、`boolean` 和 `null`、 `undefined` 这五种类型统称为**原始类型**（Primitive），表示不能再细分下去的基本类型;
2. `symbol`和`BigInt`是ES6中新增的数据类型，`symbol` 表示独一无二的值，通过 `Symbol` 函数调用生成，由于生成的 symbol 值为原始类型，所以 `Symbol` 函数不能使用`new` 调用；`BigInt`数据类型的目的是比`Number`数据类型支持的范围更大的整数值。在对大整数执行数学运算时，以任意精度表示整数的能力尤为重要。使用`BigInt`，整数溢出将不再是问题。
3. `null` 和 `undefined` 通常被认为是特殊值，这两种类型的值唯一，就是其本身。

## 规则

### 自增与自减符

* 在应用于一个包含有效数字字符的字符串时，先将其转换为数字值，再执行加减 1 的操作。字 符串变量变成数值变量。
* 在应用于一个不包含有效数字字符的字符串时，将变量的值设置为 NaN 。 字符串变量变成数值变量。
* 在应用于布尔值 false 时，先将其转换为 0 再执行加减 1 的操作。布尔值变量变成数值变量。
* 在应用于布尔值 true 时，先将其转换为 1 再执行加减 1 的操作。布尔值变量变成数值变量。
* 在应用于浮点数值时，执行加减 1 的操作。
* 在应用于对象时，先调用对象的 valueOf\(\)方法\(第 5 章将详细讨论\)以取得一个可供操作的值。然后对该值应用前述规则。如果结果是 NaN，则在调用 toString\(\)方法后再应用前述规则。对象变量变成数值变量。

```javascript
var s1 = "2"; 
var s2 = "z";
var b = false; 
var f = 1.1;
var o = {
    valueOf: function() { 
      return -1;
    } 
};
s1++; //值变成数值3
s2++; //值变成NaN
b++;  //值变成数值1
f--;  //值变成0.10000000000000000009（ 由于浮点数四舍五入所致 ）
o--;  //值变成数值-2
```

### Boolean \( \) 整型函数

在使用布尔运算符（ **逻辑非** ! ）的时候，会对操作数执行Boolean \( \)

| 数据类型 | 转为 true 的值 | 转为 false 的值 |
| :---: | :---: | :---: |
| Boolean | true | false |
| String | 任何非空字符串 | ""（空字符串） |
| Number | 任何非零数值（包括无穷大） | 0 和 NaN （参见本章后面有关NaN的内容） |
| Object | 任何对象 | null |
| Undefined | N/A | undefined |

### Number \( \) 整型函数

有 3 个函数可以把非数值转换为数值:Number\(\)、parseInt\(\)和 parseFloat\(\)。第一个函数， 即整型函数 Number\(\)可以用于任何数据类型，而另两个函数则专门用于把字符串转换成数值。这 3 个 函数对于同样的输入会有返回不同的结果。

Number\(\)函数的转换规则如下。

* 如果是 Boolean 值，true 和 false 将分别被转换为 1 和 0。
* 如果是数字值，只是简单的传入和返回。
* 如果是 null 值，返回 0。
* 如果是 undefined，返回 NaN。
* 如果是字符串，遵循下列规则 ：
  * 如果字符串中只包含数字\(包括前面带正号或负号的情况\)，则将其转换为十进制数值，即"1" 会变成 1，"123"会变成 123，而"011"会变成 11\(注意:前导的零被忽略了\);
  * 如果字符串中包含有效的浮点格式，如"1.1"，则将其转换为对应的浮点数值\(同样，也会忽略前导零\);
  * 如果字符串中包含有效的十六进制格式，例如"0xf"，则将其转换为相同大小的十进制整数值;
  * 如果字符串是空的\(不包含任何字符\)，则将其转换为 0;
  * 如果字符串中包含除上述格式之外的字符，则将其转换为 NaN。
* 如果是对象，则调用对象的 valueOf\(\)方法，然后依照前面的规则转换返回的值。如果转换

  的结果是 NaN，则调用对象的 toString\(\)方法，然后再次依照前面的规则转换返回的字符

  串值。

几个🌰栗子

![image-20200612213011518](https://img-1251598303.cos.ap-guangzhou.myqcloud.com/image-20200612213011518.png)

## 布尔操作符需要注意的点

布尔操作符就是`逻辑非`、`逻辑与`、`逻辑或`这些玩意，看了《 JavaScript高级程序设计 》之后，才发现逻辑与和逻辑或，返回的可以不是布尔值，也就是说当有一个`操作数`不是布尔值的时候，返回的并不一定是布尔值，而是遵循以下规则：

之前错误的理解：~~我天真的以为（ \|\| 、&&）这俩大哥无论如何返回的都是 true 和 false，不说了，我回去看之前写的代码了（看代码回来了，发现我之前用这俩写判断的时候，左右两边都是布尔值，哈哈，那就没啥事）~~

### 逻辑与（ && ）-同时为真才为真

逻辑与操作可以应用于任何类型的操作数，而不仅仅是布尔值。在有一个操作数不是布尔值的情况 下，逻辑与操作就不一定返回布尔值;此时，它遵循下列规则:

* 如果第一个操作数是对象，则返回第二个操作数;
* 如果第二个操作数是对象，则只有在第一个操作数的求值结果为 true 的情况下才会返回该对象;
* 如果两个操作数都是对象，则返回第二个操作数;
* 如果有一个操作数是 null，则返回 null;
* 如果有一个操作数是 NaN，则返回 NaN;
* 如果有一个操作数是 undefined，则返回 undefined。

逻辑与操作属于短路操作，即如果第一个操作数能够决定结果，那么就不会再对第二个操作数求值。 对于逻辑与操作而言，**如果第一个操作数是 false，则无论第二个操作数是什么值，结果都不再可能是 true 了**

### 逻辑或 （ \|\| ）- 一个为真就为真

与逻辑与操作相似，如果有一个操作数不是布尔值，逻辑或也不一定返回布尔值;此时，它遵循下列规则:

* 如果第一个操作数是对象，则返回第一个操作数;
* 如果第一个操作数的求值结果为 false，则返回第二个操作数;
* 如果两个操作数都是对象，则返回第一个操作数;
* 如果两个操作数都是 null，则返回 null;
* 如果两个操作数都是 NaN，则返回 NaN;
* 如果两个操作数都是 undefined，则返回 undefined。

与逻辑与操作符相似，逻辑或操作符也是短路操作符。也就是说，**如果第一个操作数的求值结果为 true，就不会对第二个操作数求值了**。

## 关系运算符

与 ECMAScript 中的其他操作符一样，当关系操作符的操作数使用了非数值时，也要进行数据转换 或完成某些奇怪的操作。以下就是相应的规则。

* 如果两个操作数都是数值，则执行数值比较。
* 如果两个操作数都是字符串，则比较两个字符串对应的字符编码值。
* 如果一个操作数是数值，则将另一个操作数转换为一个数值，然后执行数值比较。
* 如果一个操作数是对象，则调用这个对象的 valueOf\(\)方法，用得到的结果按照前面的规则执

  行比较。如果对象没有 valueOf\(\)方法，则调用 toString\(\)方法，并用得到的结果根据前面

  的规则执行比较。

* 如果一个操作数是布尔值，则先将其转换为数值，然后再执行比较。

## 加法运算符

* 如果两个操作数都是字符串，则将第二个操作数与第一个操作数拼接起来;
* 如果只有一个操作数是字符串，则将另一个操作数转换为字符串，然后再将两个字符串拼接

  起来。

![image-20200612225013544](https://img-1251598303.cos.ap-guangzhou.myqcloud.com/image-20200612225013544.png)

如果有一个操作数是对象、数值或布尔值，则调用它们的 toString\(\)方法取得相应的字符串值，然后再应用前面关于字符串的规则。对于 undefined 和 null，则分别调用 String\(\) 函数并取得字符串"undefined"和"null"。

## 相等操作符

**相等**和**不相等**（ == ）——先转换再比较，**全等**和**不全等**（ === ）——仅比较而不转换。

![image-20200612224249877](https://img-1251598303.cos.ap-guangzhou.myqcloud.com/image-20200612224249877.png)

> 记住: null == undefined 会返回 true，因为它们是类似的值;但 null === undefined 会返回 false，因为它们是不同类型的值。

## 逗号运算符

使用逗号操作符可以在一条语句中执行多个操作，如下面的例子所示:

```javascript
var num1=1, num2=2, num3=3;
```

逗号操作符多用于声明多个变量;但除此之外，逗号操作符还可以用于赋值。在用于赋值时，逗号 操作符总会返回表达式中的最后一项，如下面的例子所示:

```javascript
 var num = (5, 1, 4, 8, 0); // num的值为0
```

由于 0 是表达式中的最后一项，因此 num 的值就是 0。虽然逗号的这种使用方式并不常见，但这个例子可以帮我们理解逗号的这种行为。

